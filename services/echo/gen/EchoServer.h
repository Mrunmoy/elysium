// Auto-generated by ipcgen (embedded) -- do not edit.
#pragma once

#include "kernel/Ipc.h"

#include <cstdint>
#include <cstring>

namespace kernel
{
namespace ipc
{

class EchoServer
{
public:
    static constexpr std::uint32_t kServiceId = 0x3b7d6ba4u;

    enum MethodId : std::uint16_t
    {
        kPing = 1,
        kAdd = 2,
        kGetCount = 3,
    };

    enum NotifyId : std::uint16_t
    {
        kCountChanged = 1,
    };

    void run();

    std::int32_t notifyCountChanged(kernel::ThreadId dest, uint32_t newCount);

    virtual ~EchoServer() = default;

protected:
    virtual std::int32_t handlePing(uint32_t value, uint32_t *result) = 0;
    virtual std::int32_t handleAdd(uint32_t a, uint32_t b, uint32_t *sum) = 0;
    virtual std::int32_t handleGetCount(uint32_t *count) = 0;

private:
    void dispatch(const kernel::Message &request);
};

}  // namespace ipc
}  // namespace kernel
